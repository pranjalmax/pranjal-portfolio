<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pranjal Srivastava — Software Developer Portfolio</title>
  <meta name="description" content="Portfolio of Pranjal Srivastava — Software Developer (Java/Spring Boot, .NET/C#, ServiceNow, SQL). Projects, skills, experience, and contact." />
  <meta name="author" content="Pranjal Srivastava" />

  <!-- Canonical + Social preview -->
  <link rel="canonical" href="https://pranjalmax.github.io/pranjal-portfolio/">
  <meta property="og:title" content="Pranjal Srivastava — Software Developer">
  <meta property="og:description" content="Java/Spring Boot, .NET/C#, ServiceNow, SQL. Projects, skills, experience, and contact.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://pranjalmax.github.io/pranjal-portfolio/">
  <meta property="og:image" content="assets/Portfolio_Image.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Pranjal Srivastava — Software Developer">
  <meta name="twitter:description" content="Projects, skills, experience, and contact.">
  <meta name="twitter:image" content="assets/Portfolio_Image.png">
  <meta name="theme-color" content="#0b0f17">

  <!-- JSON-LD (SEO: Person) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Pranjal Srivastava",
    "url": "https://pranjalmax.github.io/pranjal-portfolio/",
    "image": "https://pranjalmax.github.io/pranjal-portfolio/assets/Portfolio_Image.png",
    "email": "mailto:pranjal6004@gmail.com",
    "telephone": "+13463752373",
    "sameAs": [
      "https://www.linkedin.com/in/pranjal-srivastava07/",
      "https://www.instagram.com/pranjal.srivastava.7"
    ],
    "jobTitle": "Software Developer",
    "knowsAbout": ["Java","Spring Boot",".NET/C#","ServiceNow","SQL","REST APIs","Python","ML"]
  }
  </script>

  <!-- Fonts + Favicon -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" as="style">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">

  <!-- Preload hero image -->
  <link rel="preload" as="image" href="assets/Portfolio_Image.png" imagesrcset="assets/Portfolio_Image.png 1x" imagesizes="(max-width: 900px) 100vw, 50vw">

  <style>
    :root{
      --bg:#0b0f17; --card:#121827; --muted:#94a3b8; --text:#e5e7eb; --brand:#22d3ee; --accent:#a78bfa; --ring: rgba(34,211,238,0.35);
      --shadow: 0 10px 25px rgba(2,8,23,.35); --line: rgba(148,163,184,.12);
      --header-h: 72px; /* header height */
    }
    [data-theme="light"]{
      --bg:#f7fafc; --card:#ffffff; --muted:#475569; --text:#0b0f17; --brand:#0ea5e9; --accent:#7c3aed; --ring: rgba(14,165,233,.25);
      --shadow: 0 8px 18px rgba(2,8,23,.12); --line: rgba(2,8,23,.08);
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif; background:linear-gradient(180deg,var(--bg) 0%, var(--bg) 100%); color:var(--text)}
    a{color:var(--brand); text-decoration:none}
    .container{max-width:1100px; margin:0 auto; padding:0 20px}

    /* HEADER + NAV (fixed + tidy) */
    header{position:sticky; top:0; z-index:50; backdrop-filter:saturate(180%) blur(10px); background:color-mix(in srgb, var(--bg), transparent 60%); border-bottom:1px solid var(--line)}
    .nav{ display:flex; align-items:center; justify-content:space-between; gap:12px; height:var(--header-h); }
    .nav a.logo{font-weight:800; letter-spacing:.4px; color:var(--text)}
    .nav-links{ display:flex; align-items:center; gap:14px; flex-wrap:nowrap; overflow-x:auto; white-space:nowrap; scrollbar-width:none; }
    .nav-links::-webkit-scrollbar{display:none}
    .nav-links a{color:var(--muted); font-weight:600}
    .nav-links a:hover{color:var(--text)}
    .cta-btn{background:linear-gradient(90deg,var(--brand),var(--accent)); color:#0b0f17; font-weight:800; border:none; padding:10px 14px; border-radius:12px; flex:0 0 auto}

    /* Ensure content never sits under sticky header */
    main{padding-top:calc(var(--header-h) + 12px)}
    section{scroll-margin-top:calc(var(--header-h) + 16px)}

    /* THEME TOGGLE */
    .toggle{display:flex; align-items:center; gap:8px; border:1px solid var(--line); padding:6px 10px; border-radius:999px; cursor:pointer; color:var(--muted); user-select:none}
    .toggle input{appearance:none; width:34px; height:20px; border-radius:999px; background:var(--line); position:relative; outline:none; cursor:pointer}
    .toggle input::after{content:""; position:absolute; top:2px; left:2px; width:16px; height:16px; border-radius:50%; background:var(--text); transition:transform .2s ease}
    .toggle input:checked{background:linear-gradient(90deg,var(--brand),var(--accent))}
    .toggle input:checked::after{transform:translateX(14px)}

    /* HERO */
    .hero{display:grid; grid-template-columns:1.15fr .85fr; gap:32px; padding:72px 0 36px; align-items:center}
    .badge{display:inline-flex; gap:8px; align-items:center; color:#0b0f17; background:linear-gradient(90deg,var(--brand),var(--accent)); font-weight:800; padding:8px 12px; border-radius:999px}
    .title{font-size:48px; line-height:1.05; margin:14px 0}
    .subtitle{color:var(--muted); font-size:18px}
    .profile-wrap{position:relative}
    .glow{position:absolute; inset:auto; width:85%; height:85%; left:7.5%; top:7.5%; border-radius:999px; filter:blur(48px); background:radial-gradient(50% 50% at 50% 50%, color-mix(in srgb, var(--brand), transparent 40%) 0%, transparent 70%); pointer-events:none; z-index:0}
    .profile{position:relative; z-index:1; width:100%; aspect-ratio:1/1; border-radius:18px; object-fit:cover; border:1px solid var(--line); box-shadow:var(--shadow)}
    .profile{width:100%; height:auto} /* lock layout */

    /* SECTIONS + CARDS */
    .section{padding:48px 0}
    .section h2{font-size:28px; margin:0 0 12px}
    .card{background:var(--card); border:1px solid var(--line); border-radius:16px; padding:18px; box-shadow:var(--shadow)}
    .grid{display:grid; gap:16px}
    .grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    .grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .muted{color:var(--muted)}
    .kicker{font-weight:700; color:var(--muted); letter-spacing:.16em; text-transform:uppercase; font-size:12px}
    .card .kicker{ margin-bottom:10px; display:block; }

    /* CONTACT CARD LAYOUT */
    .contact-list{ display:grid; grid-template-columns:max-content 1fr; column-gap:12px; row-gap:10px; align-items:start; }
    .contact-list .label{ color:var(--muted); font-weight:700; text-transform:uppercase; letter-spacing:.08em; font-size:12px; line-height:1.2; padding-top:2px; }
    .contact-list a{ word-break:break-word; }
    .contact-list svg{ width:18px; height:18px; opacity:.9 }
    .contact-row{ display:flex; align-items:flex-start; gap:10px }
    .contact-row .copy{ margin-left:8px; padding:4px 8px; border:1px solid var(--line); border-radius:8px; background:transparent; color:var(--text); cursor:pointer; font-size:12px; line-height:1; }
    .contact-row .copy:hover{ border-color: color-mix(in srgb, var(--brand), #fff 15%); }

    /* Pills (tags/filters) */
    .pill{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; font-size:14px; border:1px solid var(--line); background:transparent; color:var(--text); text-decoration:none; line-height:1; }
    button.pill{ appearance:none; -webkit-appearance:none; cursor:pointer; }
    .pill:hover{ border-color: color-mix(in srgb, var(--brand), #fff 15%); }
    .pill.active{ background: linear-gradient(90deg, var(--brand), var(--accent)); color:#0b0f17; border-color: transparent; }

    /* Case study buttons — clearly different, filled style */
    .btn-case{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:12px; font-weight:700;
      border:1px solid transparent;
      color:#0b0f17; background:linear-gradient(90deg,var(--brand),var(--accent));
      box-shadow: 0 6px 16px rgba(2,8,23,.25);
      cursor:pointer;
    }
    .btn-case:hover{ filter:brightness(1.05); transform:translateY(-1px) }
    .btn-case svg{ width:16px; height:16px }

    /* PROJECTS */
    .tool-row{display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-bottom:12px}
    .tool-row input[type="search"]{flex:1; min-width:240px; background:transparent; border:1px solid var(--line); color:var(--text); padding:10px 12px; border-radius:12px}
    .card.project{transition:transform .15s ease, box-shadow .15s ease}
    .card.project:hover{transform:translateY(-3px); box-shadow:0 14px 32px rgba(2,8,23,.25)}
    [data-theme="light"] .card.project:hover{box-shadow:0 12px 26px rgba(2,8,23,.12)}
    .thumb{aspect-ratio:16/9; width:100%; border-radius:12px; object-fit:cover; border:1px solid var(--line); margin-bottom:10px}
    .thumb{width:100%; height:auto} /* lock layout */
    .small{font-size:13px}

    /* MODALS */
    .modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.55); padding:20px}
    .modal[open]{display:flex}
    .modal-card{max-width:760px; width:100%; background:var(--card); border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow); padding:18px}
    .modal h3{margin-top:0}
    .modal .close{float:right; border:1px solid var(--line); border-radius:10px; padding:4px 10px; cursor:pointer; color:var(--muted)}

    /* SCROLL REVEAL */
    .reveal-on-scroll{opacity:0; transform:translateY(10px); transition:opacity .5s ease, transform .5s ease}
    .reveal-on-scroll.revealed{opacity:1; transform:none}

    footer{padding:40px 0; color:var(--muted); border-top:1px solid var(--line)}

    /* Back-to-top */
    .to-top{
      position: fixed; right: 16px; bottom: 90px; z-index: 60; width: 42px; height: 42px;
      border-radius: 10px; border:1px solid var(--line); background: var(--card);
      color: var(--text); box-shadow: var(--shadow); opacity: 0; pointer-events: none;
      transition: opacity .2s ease, transform .2s ease; transform: translateY(6px);
    }
    .to-top.show{ opacity: 1; pointer-events: auto; transform: none; }

    /* Mobile sticky CTA bar */
    @media (max-width: 900px){
      .mobile-cta{
        position: fixed; left: 14px; right: 110px; bottom: 14px; z-index: 60;
        display: inline-flex; justify-content:center; align-items:center;
        height: 46px; border-radius: 12px;
        background: linear-gradient(90deg,var(--brand),var(--accent));
        color:#0b0f17; font-weight:800; box-shadow: 0 8px 22px rgba(2,8,23,.35);
      }
      .mobile-cta.ghost{
        right: 14px; left: auto; width: 110px;
        background: transparent; color: var(--text);
        border:1px solid var(--line);
      }
      .to-top{ bottom: 76px; } /* keep above CTAs */
    }

    /* Accessibility polish */
    :focus-visible{
      outline: 2px solid color-mix(in srgb, var(--brand), #fff 20%);
      outline-offset: 2px; border-radius: 10px;
    }
    .cta-btn:focus-visible, .pill:focus-visible, .btn-case:focus-visible{ outline-offset: 3px }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
    }

    /* --- Education list (already added) --- */
    .edu-list{ display:grid; gap:12px; }
    .edu-item{
      display:grid; grid-template-columns:56px 1fr; gap:12px; align-items:center;
      background:var(--card); border:1px solid var(--line);
      border-radius:16px; padding:14px; box-shadow:var(--shadow);
    }
    .edu-item img.logo{
      width:56px; height:56px; border-radius:10px; object-fit:cover;
      border:1px solid var(--line); background:#0a0a0a;
    }
    .edu-item .edu-lines{ line-height:1.25 }
    .edu-item .edu-title{ font-weight:700; }
    .edu-item .edu-sub{ color:var(--muted); }

    /* --- Make "Hire Me" text clearly visible (already added) --- */
    .cta-btn, .mobile-cta{
      color:#0b0f17 !important;
      text-shadow:0 1px 0 rgba(255,255,255,.35);
    }
    .cta-btn:visited{ color:#0b0f17 !important; }

    /* --- Dark-mode modal contrast improvements (already added) --- */
    .modal[open]{ backdrop-filter: blur(3px); }
    .modal-card{
      background: color-mix(in srgb, var(--card), #fff 8%);
      border-color: color-mix(in srgb, var(--line), #fff 30%);
      box-shadow: 0 24px 50px rgba(2,8,23,.6);
    }
    .modal .close{
      color: var(--text);
      border-color: color-mix(in srgb, var(--line), #fff 20%);
    }

    /* --- Perf/CLS: below-the-fold lazy render --- */
    #skills, #experience, #projects, #education, #certs, #contact {
      content-visibility:auto;
      contain-intrinsic-size: 1px 800px; /* reserve space to prevent CLS */
    }

    /* --- Chat UX styles --- */
    #ps-quick-chips { display:flex; gap:8px; flex-wrap:wrap; padding:8px 10px; border-bottom:1px solid var(--line); }
    #ps-quick-chips button{
      padding:6px 10px; border-radius:999px; border:1px solid var(--line);
      background:transparent; color:var(--text); font-size:12px; cursor:pointer;
    }
    #ps-quick-chips button:hover{ border-color: color-mix(in srgb, var(--brand), #fff 15%); }
    .msg{
      max-width:85%; line-height:1.35;
      word-wrap:break-word; overflow-wrap:anywhere;
    }
    .msg.user{
      align-self:flex-end;
      background:linear-gradient(90deg,var(--brand),var(--accent));
      color:#0b0f17; border:1px solid transparent;
    }
    .msg.bot{
      align-self:flex-start;
      background:rgba(148,163,184,.12);
      color:var(--text); border:1px solid var(--line);
    }
    .msg, .typing{
      padding:8px 10px; border-radius:12px;
    }
    .typing{ align-self:flex-start; display:inline-flex; gap:4px; color:var(--muted); }
    .dot{ width:6px; height:6px; border-radius:50%; background:currentColor; opacity:.7; animation:blink 1.2s infinite ease-in-out; }
    .dot:nth-child(2){ animation-delay:.15s } .dot:nth-child(3){ animation-delay:.3s }
    @keyframes blink{ 0%,80%,100%{ opacity:.2 } 40%{ opacity:1 } }

    /* prevent CLS inside chat box */
    #ps-chat-messages{ contain: content; }
  </style>
</head>
<body>
  <!-- Accessibility: skip to content -->
  <a class="skip-link" href="#home" style="position:absolute;left:12px;top:-40px;z-index:1000;background:var(--card);color:var(--text);padding:8px 12px;border-radius:10px;border:1px solid var(--line);transition:top .2s ease;">Skip to content</a>

  <header>
    <div class="container nav">
      <a class="logo" href="#home">Pranjal</a>
      <nav class="nav-links">
        <a href="#about">About</a>
        <a href="#skills">Skills</a>
        <a href="#experience">Experience</a>
        <a href="#projects">Projects</a>
        <a href="#education">Education</a>
        <a href="#certs">Certifications</a>
        <a href="#contact">Contact</a>

        <!-- Theme toggle -->
        <label class="toggle" title="Toggle light/dark">
          <span>Theme</span>
          <input type="checkbox" id="themeToggle" aria-label="Toggle theme">
        </label>

        <!-- Hire Me: scroll to Contact -->
        <a class="cta-btn" id="hireBtn" href="#contact"
           data-mailto="mailto:pranjal6004@gmail.com?subject=Interview%20—%20Software%20Developer&body=Hi%20Pranjal,%20">
          Hire Me
        </a>
      </nav>
    </div>
  </header>

  <main id="home" class="container">
    <section class="hero reveal-on-scroll">
      <div>
        <span class="badge">Available for Full-Time — Software Developer</span>
        <h1 class="title">Pranjal Srivastava</h1>
        <p class="subtitle">
          Software Developer focused on backend APIs, ServiceNow automation, and SQL performance.
          I build clean REST services, automate ITSM, and ship reliably with CI/CD.
        </p>
        <div class="row hero-actions" style="margin-top:16px">
          <a class="pill" href="assets/Pranjal_Srivastava_Resume_Portfolio_Full.pdf" target="_blank" rel="noopener">Download Resume</a>
          <a class="pill" href="https://www.linkedin.com/in/pranjal-srivastava07/" target="_blank" rel="noopener">LinkedIn</a>
          <a class="pill" href="#contact">Contact</a>
        </div>
      </div>
      <div class="profile-wrap">
        <span class="glow" aria-hidden="true"></span>
        <img class="profile" src="assets/Portfolio_Image.png" alt="Pranjal Srivastava portrait" loading="eager" fetchpriority="high" decoding="async" width="600" height="600" />
      </div>
    </section>

    <section id="about" class="section">
      <div class="grid cols-2">
        <div class="reveal-on-scroll">
          <h2>About Me</h2>
          <p class="muted">
            I design and ship practical software—Java/Spring Boot and .NET APIs with strong error handling,
            ServiceNow apps that remove manual steps, and SQL schemas tuned for real usage. I work iteratively
            in Agile teams, add tests where they matter, and document what I build so others can run it confidently.
          </p>
          <div class="card">
            <div class="kicker">What I’m Looking For</div>
            <p>Full-time Software Developer roles focused on backend APIs, data-heavy features, and polished UIs.</p>
            <div class="row">
              <span class="pill">Java & Spring</span>
              <span class="pill">.NET / C#</span>
              <span class="pill">ServiceNow</span>
              <span class="pill">SQL</span>
              <span class="pill">AWS/Azure (basics)</span>
            </div>
          </div>
        </div>

        <!-- CONTACT CARD -->
        <div class="card reveal-on-scroll">
          <div class="kicker">Contact</div>
          <div class="contact-list">
            <div class="label">Name</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z" stroke="currentColor" stroke-width="1.5"/></svg>
              <span>Pranjal Srivastava</span>
            </div>

            <div class="label">Address</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 21s-7-6.16-7-11a7 7 0 1 1 14 0c0 4.84-7 11-7 11Z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="10" r="2.5" stroke="currentColor" stroke-width="1.5"/></svg>
              <span>1802 Ennis Joslin Rd, Apt 633, Corpus Christi, Nueces County, Texas, 78412</span>
            </div>

            <div class="label">Email</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 7l9 6 9-6M4 6h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1Z" stroke="currentColor" stroke-width="1.5"/></svg>
              <a href="mailto:pranjal6004@gmail.com" id="email-link">pranjal6004@gmail.com</a>
              <button class="copy" data-copy="#email-link">Copy</button>
            </div>

            <div class="label">Mobile</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M16 2H8a2 2 0 0 0-2 2v16l4-2h6a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z" stroke="currentColor" stroke-width="1.5"/></svg>
              <a href="tel:+13463752373" id="phone-link">+1 (346) 375-2373</a>
              <button class="copy" data-copy="#phone-link">Copy</button>
            </div>

            <div class="label">LinkedIn</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 3h16a1 1 0 0 1 1 1v16l-4-3H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z" stroke="currentColor" stroke-width="1.5"/></svg>
              <a href="https://www.linkedin.com/in/pranjal-srivastava07/" target="_blank" rel="noopener">linkedin.com/in/pranjal-srivastava07</a>
            </div>

            <div class="label">Instagram</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.5"/><circle cx="17.5" cy="6.5" r="1" fill="currentColor"/></svg>
              <a href="https://www.instagram.com/pranjal.srivastava.7?igsh=MXYzcXc0MHJxdW13eA==" target="_blank" rel="noopener">@pranjal.srivastava.7</a>
            </div>
          </div>
        </div>

      </div>
    </section>

    <section id="skills" class="section reveal-on-scroll">
      <h2>Core Skills</h2>
      <div class="grid cols-3">
        <div class="card"><h3>APIs & Web</h3><p class="muted">Java, Spring Boot, .NET/C#, REST, JSON/XML, Swagger/OpenAPI, Postman/Insomnia</p></div>
        <div class="card"><h3>ServiceNow</h3><p class="muted">App Engine Studio, Service Portal, Record Producers, Client Scripts, UI Policies, Business Rules, Flow Designer, Events/Notifications, ACLs/RBAC</p></div>
        <div class="card"><h3>Data & SQL</h3><p class="muted">SQL Server/Postgres, schema design, indexing, performance tuning, SSRS/Power BI</p></div>
        <div class="card"><h3>ML & Analytics</h3><p class="muted">Python, NLP (TF-IDF/embeddings, classifiers), Time-series (RNN/CNN), model eval (ROC-AUC, F1, MAE/RMSE)</p></div>
        <div class="card"><h3>Networking/SDN</h3><p class="muted">Mininet, RYU controller, traffic gen (iperf/hping3), anomaly detection</p></div>
        <div class="card"><h3>DevOps</h3><p class="muted">Git/GitHub, CI/CD (GitHub Actions/Jenkins), Docker, basic AWS/Azure</p></div>
      </div>
    </section>

    <section id="experience" class="section reveal-on-scroll">
      <h2>Experience</h2>
      <div class="timeline">
        <div class="tl-item">
          <h3><strong>Tinker Tech Logix</strong> — <em>Software Developer</em> <span class="muted">(Apr 2024 – Aug 2025)</span></h3>
          <ul class="muted">
            <li>Designed RESTful APIs in <strong>Java/Spring Boot</strong> & <strong>.NET</strong>; documented endpoints with <strong>OpenAPI/Swagger</strong> and exercised via Postman/Insomnia.</li>
            <li>Improved reliability and query time by tuning <strong>SQL schemas/indexes</strong>; added caching for high-traffic endpoints.</li>
            <li>Built <strong>ServiceNow</strong> features: Record Producers, UI Policies, Client Scripts, Business Rules, Flow Designer notifications; implemented <strong>RBAC</strong> and audit-friendly patterns.</li>
            <li>Wrote <strong>unit/integration tests</strong> and wired lightweight <strong>CI/CD</strong> in GitHub Actions; supported staged deployments and health checks.</li>
            <li>Collaborated via PRs/code reviews, managed conflicts, and shipped in short Agile iterations with user-focused testing.</li>
          </ul>
        </div>
        <div class="tl-item">
          <h3><strong>ECS</strong> — <em>Intern, Cloud Server & Data Management</em> <span class="muted">(Jun 2019 – Jul 2019)</span></h3>
          <ul class="muted">
            <li>Assisted server app installs/upgrades and basic cloud migration tasks; contributed to backup/restore runbooks.</li>
            <li>Automated environment checks and routine tasks with small scripts for faster cutovers and troubleshooting.</li>
          </ul>
        </div>
      </div>
      <p class="small muted">More hands-on impact below in selected projects.</p>
    </section>

    <section id="projects" class="section">
      <h2 class="reveal-on-scroll">Projects</h2>

      <div class="tool-row reveal-on-scroll" aria-label="Project filters">
        <button class="pill" data-filter="all">All</button>
        <button class="pill" data-filter="java">Java</button>
        <button class="pill" data-filter="dotnet">.NET</button>
        <button class="pill" data-filter="servicenow">ServiceNow</button>
        <button class="pill" data-filter="ml">ML</button>
        <input type="search" id="projSearch" placeholder="Search projects..." aria-label="Search projects">
      </div>

      <div class="grid cols-3" id="projectGrid">
        <!-- 1) ServiceNow Dog Adoption -->
        <article class="card project reveal-on-scroll" data-tags="servicenow web">
          <img class="thumb" src="assets/Image_dog.png" alt="Dog Adoption ServiceNow portal UI" loading="lazy" decoding="async" width="640" height="360">
          <h3>Dog Adoption Portal — ServiceNow</h3>
          <p class="muted">App Engine app with <strong>Dogs</strong> & <strong>Adoption Centers</strong>; Service Portal Record Producer, reference links, validations, and optional email notifications.</p>
          <div class="row small"><span class="pill">ServiceNow</span><span class="pill">Flow Designer</span><span class="pill">UI Policies</span></div>
          <div class="row" style="margin-top:8px">
            <button class="btn-case open-modal" data-modal="modal-dog" aria-label="Open Dog Adoption case study">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Case study
            </button>
          </div>
        </article>

        <!-- 2) ServiceNow Helpdesk -->
        <article class="card project reveal-on-scroll" data-tags="servicenow itsm">
          <img class="thumb" src="assets/Image_helpdesk.png" alt="Helpdesk ticketing Kanban board" loading="lazy" decoding="async" width="640" height="360">
          <h3>Helpdesk Ticketing App — ServiceNow</h3>
          <p class="muted">Custom tables (Tickets/Departments/Technicians), Business Rules for auto-assign, email notifications, SLAs and dashboards for visibility.</p>
          <div class="row small"><span class="pill">ServiceNow</span><span class="pill">Business Rules</span><span class="pill">Dashboards</span></div>
          <div class="row" style="margin-top:8px">
            <button class="btn-case open-modal" data-modal="modal-helpdesk" aria-label="Open Helpdesk case study">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Case study
            </button>
          </div>
        </article>

        <!-- 3) DDoS SDN -->
        <article class="card project reveal-on-scroll" data-tags="ml python networking">
          <img class="thumb" src="assets/image_ddos.png" alt="SDN topology with DDoS alert visualization" loading="lazy" decoding="async" width="640" height="360">
          <h3>DDoS Detection on SDN — Mininet / RYU / Python</h3>
          <p class="muted">Built SDN topology; generated normal vs attack traffic (iperf/hping3); controller logs (RYU) fed an ML detector to flag anomalies.</p>
          <div class="row small"><span class="pill">Mininet</span><span class="pill">RYU</span><span class="pill">Python</span></div>
          <div class="row" style="margin-top:8px">
            <button class="btn-case open-modal" data-modal="modal-sdn" aria-label="Open DDoS case study">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Case study
            </button>
          </div>
        </article>

        <!-- 4) Heart Failure Detection -->
        <article class="card project reveal-on-scroll" data-tags="ml python">
          <img class="thumb" src="assets/Image_heart.png" alt="ECG electrodes and waveform monitor" loading="lazy" decoding="async" width="640" height="360">
          <h3>Heart Failure Detection Using ECG — Python ML</h3>
          <p class="muted">End-to-end pipeline: ECG signal processing → features → classifiers; evaluated with precision/recall/F1; published results.</p>
          <div class="row small"><span class="pill">Python</span><span class="pill">ML</span><span class="pill">Signal Processing</span></div>
          <div class="row" style="margin-top:8px">
            <button class="btn-case open-modal" data-modal="modal-ecg" aria-label="Open ECG case study">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Case study
            </button>
          </div>
        </article>

        <!-- 5) DB Optimizations -->
        <article class="card project reveal-on-scroll" data-tags="java dotnet sql">
          <img class="thumb" src="assets/Image_database.png" alt="Database performance optimization concept" loading="lazy" decoding="async" width="640" height="360">
          <h3>Optimizations in Databases via DS & Algorithms</h3>
          <p class="muted">Matched data structures to access patterns; tuned schemas and indexes; measured latency improvements on critical paths.</p>
          <div class="row small"><span class="pill">SQL</span><span class="pill">Performance</span><span class="pill">Data Structures</span></div>
        </article>

        <!-- 6) Fake News Detection -->
        <article class="card project reveal-on-scroll" data-tags="ml python nlp">
          <img class="thumb" src="assets/Image_fakenews.png" alt="Fake news detection with NLP/ML visual" loading="lazy" decoding="async" width="640" height="360">
          <h3>Fake News Detection — Python / ML</h3>
          <p class="muted">NLP pipeline with text cleaning, TF-IDF/embeddings, and classifiers to flag misinformation; compared models and metrics.</p>
          <div class="row small"><span class="pill">Python</span><span class="pill">NLP</span><span class="pill">Classification</span></div>
          <div class="row" style="margin-top:8px">
            <button class="btn-case open-modal" data-modal="modal-fakenews" aria-label="Open Fake News case study">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Case study
            </button>
          </div>
        </article>

        <!-- 7) Weather Forecasting (Deep Learning) -->
        <article class="card project reveal-on-scroll" data-tags="ml python timeseries deep learning">
          <img class="thumb" src="assets/Image_weather.png" alt="Deep-learning weather forecasting visual" loading="lazy" decoding="async" width="640" height="360">
          <h3>Weather Forecasting — Deep Learning</h3>
          <p class="muted">Time-series model (RNN/CNN hybrid) on historical weather to predict short-term conditions; evaluated with MAE/RMSE.</p>
          <div class="row small"><span class="pill">Python</span><span class="pill">Deep Learning</span><span class="pill">Time-Series</span></div>
          <div class="row" style="margin-top:8px">
            <button class="btn-case open-modal" data-modal="modal-weather" aria-label="Open Weather case study">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
              Case study
            </button>
          </div>
        </article>
      </div>
    </section>

    <!-- UPDATED EDUCATION SECTION -->
    <section id="education" class="section reveal-on-scroll">
      <h2>Education</h2>
      <div class="edu-list">
        <!-- TAMU-CC -->
        <div class="edu-item">
          <img class="logo" src="assets/image_tamucc.jpeg" alt="Texas A&M University–Corpus Christi logo" loading="lazy" decoding="async" width="56" height="56">
          <div class="edu-lines">
            <div class="edu-title">Texas A&M University–Corpus Christi</div>
            <div class="edu-sub">Master of Science in Computer Science (2021–2023)</div>
          </div>
        </div>

        <!-- SRM -->
        <div class="edu-item">
          <img class="logo" src="assets/image_srm.jpeg" alt="SRM Institute of Science and Technology logo" loading="lazy" decoding="async" width="56" height="56">
          <div class="edu-lines">
            <div class="edu-title">SRM Institute of Science and Technology</div>
            <div class="edu-sub">Bachelor of Technology in Computer Science and Engineering (2017–2021)</div>
          </div>
        </div>
      </div>
    </section>

    <section id="certs" class="section reveal-on-scroll">
      <h2>Certifications</h2>
      <div class="grid cols-2">
        <div class="card"><ul class="muted">
          <li>micro1 — Certified Software Engineer (AI Interview), Sep 2025</li>
          <li>Programming in Python for Everyone</li>
          <li>Learn C++ Programming — Beginner to Advance — Deep Dive in C++</li>
        </ul></div>
        <div class="card"><ul class="muted">
          <li>Complete ServiceNow Developer Course (Udemy)</li>
          <li>ChatGPT Prompt Engineering for Developers</li>
        </ul></div>
      </div>
    </section>

    <section id="contact" class="section reveal-on-scroll">
      <h2>Contact</h2>
      <div class="grid cols-2">
        <form class="card" action="https://formspree.io/f/mnnggnvp" method="POST" id="contactForm">
          <label class="small muted" for="name">Name</label>
          <input id="name" name="name" placeholder="Your name" required
                 style="width:100%;background:transparent;border:1px solid var(--line);border-radius:12px;padding:12px;color:var(--text)">

          <label class="small muted" for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="you@example.com" required
                 style="width:100%;background:transparent;border:1px solid var(--line);border-radius:12px;padding:12px;color:var(--text)">

          <label class="small muted" for="message">Message</label>
          <textarea id="message" name="message" rows="5" placeholder="Hi Pranjal, we’d like to talk about an opportunity…"
                    required style="width:100%;background:transparent;border:1px solid var(--line);border-radius:12px;padding:12px;color:var(--text)"></textarea>

          <input type="hidden" name="_subject" value="New message from your portfolio" />
          <input type="hidden" name="_next" value="https://pranjalmax.github.io/pranjal-portfolio/thanks.html" />
          <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off">

          <button type="submit" id="sendBtn"
                  style="background:linear-gradient(90deg,var(--brand),var(--accent));border:none;color:#0b0f17;font-weight:800;padding:12px 14px;border-radius:12px">Send Message</button>

          <p id="formStatus" class="small muted" style="margin-top:8px;"></p>
          <p class="small muted" style="margin-top:8px">Or email directly: <a href="mailto:pranjal6004@gmail.com">pranjal6004@gmail.com</a></p>
        </form>

        <div class="card">
          <div class="kicker">Contact Details</div>
          <div class="contact-list" style="margin-top:6px">
            <div class="label">Name</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z" stroke="currentColor" stroke-width="1.5"/></svg>
              <span>Pranjal Srivastava</span>
            </div>

            <div class="label">Address</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 21s-7-6.16-7-11a7 7 0 1 1 14 0c0 4.84-7 11-7 11Z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="10" r="2.5" stroke="currentColor" stroke-width="1.5"/></svg>
              <span>1802 Ennis Joslin Rd, Apt 633, Corpus Christi, Nueces County, Texas, 78412</span>
            </div>

            <div class="label">Email</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 7l9 6 9-6M4 6h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1Z" stroke="currentColor" stroke-width="1.5"/></svg>
              <a href="mailto:pranjal6004@gmail.com" id="email-link-2">pranjal6004@gmail.com</a>
              <button class="copy" data-copy="#email-link-2">Copy</button>
            </div>

            <div class="label">Mobile</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M16 2H8a2 2 0 0 0-2 2v16l4-2h6a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z" stroke="currentColor" stroke-width="1.5"/></svg>
              <a href="tel:+13463752373" id="phone-link-2">+1 (346) 375-2373</a>
              <button class="copy" data-copy="#phone-link-2">Copy</button>
            </div>

            <div class="label">LinkedIn</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 3h16a1 1 0 0 1 1 1v16l-4-3H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z" stroke="currentColor" stroke-width="1.5"/></svg>
              <a href="https://www.linkedin.com/in/pranjal-srivastava07/" target="_blank" rel="noopener">linkedin.com/in/pranjal-srivastava07</a>
            </div>

            <div class="label">Instagram</div>
            <div class="contact-row">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.5"/><circle cx="17.5" cy="6.5" r="1" fill="currentColor"/></svg>
              <a href="https://www.instagram.com/pranjal.srivastava.7?igsh=MXYzcXc0MHJxdW13eA==" target="_blank" rel="noopener">@pranjal.srivastava.7</a>
            </div>
          </div>

          <hr style="border:none;border-top:1px solid var(--line);margin:14px 0">
          <div class="row">
            <a class="pill" href="assets/Pranjal_Srivastava_Resume_Portfolio_Full.pdf" target="_blank" rel="noopener">Download Resume</a>
            <a class="pill" href="https://www.linkedin.com/in/pranjal-srivastava07/" target="_blank" rel="noopener">LinkedIn</a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Case Study Modals -->
  <dialog class="modal" id="modal-dog" aria-label="Dog Adoption Portal Case Study">
    <div class="modal-card">
      <button class="close" data-close="modal-dog">Close</button>
      <h3>Dog Adoption Portal — ServiceNow</h3>
      <p><strong>Problem:</strong> Manual intake led to missing info and slow follow-ups.</p>
      <p><strong>Solution:</strong> App Engine app with <em>Dogs</em> & <em>Adoption Centers</em> tables, Service Portal Record Producer (server-side mapping), reference linkage, required fields, and optional email notifications via Flow Designer.</p>
      <p><strong>Impact:</strong> Standardized intake, role-based visibility, and faster decisions; foundation for dashboards and an “Adopt” approval flow.</p>
      <div class="row small"><span class="pill">ServiceNow</span><span class="pill">Flow Designer</span><span class="pill">UI Policies</span></div>
    </div>
  </dialog>

  <dialog class="modal" id="modal-helpdesk" aria-label="Helpdesk Ticketing Case Study">
    <div class="modal-card">
      <button class="close" data-close="modal-helpdesk">Close</button>
      <h3>Helpdesk Ticketing App — ServiceNow (ITSM)</h3>
      <p><strong>Problem:</strong> Unstructured intake and long resolution cycles.</p>
      <p><strong>Solution:</strong> Organized tables (Tickets/Departments/Technicians), Business Rules for auto-assign, email notifications, SLAs; Service Portal for submission and status.</p>
      <p><strong>Impact:</strong> Faster TTR, better routing/ownership, SLA visibility; repeatable intake with validations.</p>
      <div class="row small"><span class="pill">ServiceNow</span><span class="pill">Business Rules</span><span class="pill">Dashboards</span></div>
    </div>
  </dialog>

  <dialog class="modal" id="modal-sdn" aria-label="DDoS SDN Case Study">
    <div class="modal-card">
      <button class="close" data-close="modal-sdn">Close</button>
      <h3>DDoS Detection on SDN — Mininet / RYU / Python</h3>
      <p><strong>Problem:</strong> Detect attack patterns early with fewer false positives in SDN networks.</p>
      <p><strong>Solution:</strong> Emulated topology in Mininet; generated normal vs. attack traffic (iperf/hping3); captured controller logs via RYU; trained ML classifier on engineered features.</p>
      <p><strong>Impact:</strong> Earlier anomaly detection with improved precision/recall over baselines; reproducible experiments.</p>
      <div class="row small"><span class="pill">Mininet</span><span class="pill">RYU</span><span class="pill">Python</span></div>
    </div>
  </dialog>

  <dialog class="modal" id="modal-ecg" aria-label="Heart Failure Detection Case Study">
    <div class="modal-card">
      <button class="close" data-close="modal-ecg">Close</button>
      <h3>Heart Failure Detection Using ECG — Python ML</h3>
      <p><strong>Problem:</strong> Identify cardiac conditions from ECG signals with reliable evaluation.</p>
      <p><strong>Solution:</strong> Signal processing pipeline, feature extraction, multiple classifiers; handled class imbalance; evaluated with precision/recall/F1 and confusion matrix.</p>
      <p><strong>Impact:</strong> Clearer pipeline and metrics; results accepted/published, demonstrating feasibility.</p>
      <div class="row small"><span class="pill">Python</span><span class="pill">ML</span><span class="pill">Signal Processing</span></div>
    </div>
  </dialog>

  <dialog class="modal" id="modal-fakenews" aria-label="Fake News Case Study">
    <div class="modal-card">
      <button class="close" data-close="modal-fakenews">Close</button>
      <h3>Fake News Detection — Python / ML</h3>
      <p><strong>Problem:</strong> Identify misleading/false articles from raw text.</p>
      <p><strong>Solution:</strong> Preprocessing (tokenization, stop-words, lemmatization); features via TF-IDF/embeddings; trained and compared classifiers (LogReg/SVM/NN) with ROC-AUC and F1.</p>
      <p><strong>Impact:</strong> Better precision/recall vs. baselines; reproducible pipeline with clear evaluation.</p>
      <div class="row small"><span class="pill">Python</span><span class="pill">NLP</span><span class="pill">Classification</span></div>
    </div>
  </dialog>

  <dialog class="modal" id="modal-weather" aria-label="Weather Forecasting Case Study">
    <div class="modal-card">
      <button class="close" data-close="modal-weather">Close</button>
      <h3>Weather Forecasting — Deep Learning</h3>
      <p><strong>Problem:</strong> Predict near-term weather metrics from historical observations.</p>
      <p><strong>Solution:</strong> Feature engineering (lags, rolling stats); RNN/CNN architecture with proper validation and early stopping; evaluated MAE/RMSE.</p>
      <p><strong>Impact:</strong> Reduced error vs. baselines; reproducible training/evaluation scripts.</p>
      <div class="row small"><span class="pill">Python</span><span class="pill">Deep Learning</span><span class="pill">Time-Series</span></div>
    </div>
  </dialog>

  <footer>
    <div class="container">
      <p>© <span id="y"></span> Pranjal Srivastava — Built for speed, clarity, and recruiter-friendliness.</p>
    </div>
  </footer>

  <!-- Back-to-top button -->
  <button id="toTop" class="to-top" aria-label="Back to top">↑</button>

  <!-- Sticky mobile CTA (<=900px) -->
  <a href="#contact" class="mobile-cta" id="mobileHire" aria-label="Hire Pranjal">Hire Me</a>
  <a href="assets/Pranjal_Srivastava_Resume_Portfolio_Full.pdf" class="mobile-cta ghost" target="_blank" rel="noopener" aria-label="Download resume">Resume</a>

  <script>
    // Helper: requestIdleCallback fallback
    window._ric = window.requestIdleCallback || function(cb){ return setTimeout(() => cb({timeRemaining:()=>0})); };

    // Year
    document.getElementById('y').textContent = new Date().getFullYear();

    // THEME TOGGLE (persist)
    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('theme-pref');
    if (savedTheme) document.documentElement.setAttribute('data-theme', savedTheme);
    themeToggle.checked = document.documentElement.getAttribute('data-theme') === 'light';
    themeToggle.addEventListener('change', () => {
      const next = themeToggle.checked ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme-pref', next);
    });

    // SCROLL REVEAL (defer non-critical init)
    _ric(() => {
      const revealEls = document.querySelectorAll('.reveal-on-scroll');
      const io = new IntersectionObserver(entries => {
        entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('revealed'); });
      }, {threshold:.1});
      revealEls.forEach(el => io.observe(el));
    });

    // PROJECT FILTERS + SEARCH
    (function(){
      const grid = document.getElementById('projectGrid');
      const cards = Array.from(grid.querySelectorAll('.project'));
      const search = document.getElementById('projSearch');
      const filterBtns = Array.from(document.querySelectorAll('[data-filter]'));
      let activeFilter = 'all';

      const allBtn = filterBtns.find(b => b.dataset.filter === 'all');
      if (allBtn) allBtn.classList.add('active');

      function applyFilters(){
        const q = (search.value || '').toLowerCase().trim();
        cards.forEach(c => {
          const tags = (c.getAttribute('data-tags') || '').toLowerCase();
          const text = c.textContent.toLowerCase();
          const matchTag = activeFilter === 'all' || tags.includes(activeFilter);
          const matchText = !q || text.includes(q);
          c.style.display = (matchTag && matchText) ? '' : 'none';
        });
      }

      filterBtns.forEach(b => b.addEventListener('click', () => {
        activeFilter = b.dataset.filter;
        filterBtns.forEach(x => x.classList.remove('active'));
        b.classList.add('active');
        applyFilters();
      }));
      search.addEventListener('input', applyFilters);
    })();

    // MODALS
    (function(){
      function openModal(id){ document.getElementById(id).setAttribute('open',''); }
      function closeModal(id){ document.getElementById(id).removeAttribute('open'); }
      document.querySelectorAll('.open-modal').forEach(btn => btn.addEventListener('click', () => openModal(btn.dataset.modal)));
      document.querySelectorAll('.modal .close').forEach(b => b.addEventListener('click', () => closeModal(b.dataset.close)));
      document.querySelectorAll('.modal').forEach(m => m.addEventListener('click', e => { if (e.target === m) m.removeAttribute('open'); }));
    })();

    // CONTACT FORM AJAX (manual redirect to thanks page)
    (function(){
      const form = document.getElementById('contactForm');
      const statusEl = document.getElementById('formStatus');
      const sendBtn = document.getElementById('sendBtn');
      if (!form) return;

      function confettiBurst(x = window.innerWidth/2, y = window.innerHeight/2){
        const styles = getComputedStyle(document.documentElement);
        const colors = [styles.getPropertyValue('--brand').trim(), styles.getPropertyValue('--accent').trim(), '#ffffff'];
        const count = 24;
        for(let i=0;i<count;i++){
          const d = document.createElement('div');
          d.style.position='fixed'; d.style.left=x+'px'; d.style.top=y+'px';
          d.style.width='6px'; d.style.height='6px'; d.style.borderRadius='2px';
          d.style.background=colors[i%colors.length]; d.style.pointerEvents='none'; d.style.zIndex=9999;
          document.body.appendChild(d);
          const ang = Math.random()*Math.PI*2; const vel = 3+Math.random()*6; const dx = Math.cos(ang)*vel; const dy = Math.sin(ang)*vel;
          const rot = (Math.random()*360)+'deg';
          d.animate([{transform:`translate(0,0) rotate(0)`}, {transform:`translate(${dx*30}px, ${dy*30}px) rotate(${rot})`, opacity:0}], {duration:800+Math.random()*400, easing:'cubic-bezier(.2,.8,.2,1)'}).onfinish=()=>d.remove();
        }
      }

      form.addEventListener('submit', async (e) => {
        e.preventDefault(); statusEl.textContent = '';
        const rect = sendBtn.getBoundingClientRect();
        sendBtn.disabled = true; const originalText = sendBtn.textContent; sendBtn.textContent = 'Sending…';

        try {
          const data = new FormData(form);
          const res = await fetch(form.action, { method: 'POST', body: data, headers: { 'Accept': 'application/json' } });
          if (res.ok) {
            statusEl.textContent = '✅ Thanks! Your message has been sent.';
            confettiBurst(rect.left + rect.width/2, rect.top + window.scrollY);
            const next = form.querySelector('input[name="_next"]')?.value || 'thanks.html';
            setTimeout(() => { window.location.href = next; }, 600);
            return;
          } else {
            const err = await res.json().catch(() => ({}));
            statusEl.textContent = err?.errors?.[0]?.message || '⚠️ Could not send. Please try again.';
          }
        } catch {
          statusEl.textContent = '⚠️ Network error. Please try again.';
        } finally {
          sendBtn.disabled = false; sendBtn.textContent = originalText;
        }
      });
    })();

    // Copy-to-clipboard for contact items
    document.querySelectorAll('.copy').forEach(btn => {
      btn.addEventListener('click', async () => {
        const sel = btn.getAttribute('data-copy');
        const el = document.querySelector(sel);
        const text = (el?.textContent || '').trim();
        try{
          await navigator.clipboard.writeText(text);
          const old = btn.textContent;
          btn.textContent = 'Copied!';
          setTimeout(()=> btn.textContent = old, 1200);
        }catch{}
      });
    });

    // Back to top
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 600) toTop.classList.add('show'); else toTop.classList.remove('show');
    });
    toTop.addEventListener('click', () => window.scrollTo({top:0, behavior:'smooth'}));

    // “Hire Me” → smooth scroll to Contact + focus (desktop nav + mobile sticky)
    (function(){
      const targets = [document.getElementById('hireBtn'), document.getElementById('mobileHire')].filter(Boolean);
      const formSection = document.getElementById('contact');
      const nameField = document.getElementById('name');
      targets.forEach(btn => {
        btn.addEventListener('click', (e) => {
          if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return;
          e.preventDefault();
          formSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
          setTimeout(() => nameField?.focus({ preventScroll: true }), 600);
        });
      });
    })();

    // OPTIONAL: Friendly resume check (non-blocking)
    (async () => {
      const links = Array.from(document.querySelectorAll('a')).filter(a => a.href.includes('Pranjal_Srivastava_Resume_Portfolio_Full.pdf'));
      try {
        const res = await fetch('assets/Pranjal_Srivastava_Resume_Portfolio_Full.pdf', { method: 'HEAD' });
        if (!res.ok) links.forEach(a => a.addEventListener('click', e => { e.preventDefault(); alert('Resume file not found yet. Try again in a minute.'); })); 
      } catch {}
    })();
  </script>

  <!-- Floating Chat Widget -->
  <div id="ps-chat" style="position:fixed;right:16px;bottom:16px;z-index:70;">
    <button id="ps-chat-toggle" aria-label="Open chat"
      style="width:56px;height:56px;border-radius:50%;border:1px solid var(--line);
             background:linear-gradient(90deg,var(--brand),var(--accent));
             color:#0b0f17;font-weight:800;box-shadow:0 8px 22px rgba(2,8,23,.35);">
      AI
    </button>

    <div id="ps-chat-box" aria-live="polite"
      style="display:none;position:absolute;right:0;bottom:70px;width:320px;max-height:65vh;overflow:hidden;
             background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:0 12px 28px rgba(2,8,23,.35);">
      <div style="padding:12px 14px;border-bottom:1px solid var(--line);font-weight:700;">Ask about Pranjal</div>

      <!-- Quick prompt chips -->
      <div id="ps-quick-chips" role="toolbar" aria-label="Quick prompts"></div>

      <div id="ps-chat-messages"
           style="padding:12px;display:flex;flex-direction:column;gap:10px;max-height:42vh;overflow:auto;">
        <div class="msg bot" style="align-self:flex-start;">
          Hi! I can answer questions about Pranjal’s experience, skills, and projects.
        </div>
      </div>

      <form id="ps-chat-form" style="display:flex;gap:8px;padding:10px;border-top:1px solid var(--line);align-items:flex-end;">
        <textarea id="ps-chat-input" name="q" autocomplete="off" rows="1"
               placeholder="Ask about experience, skills… (Enter to send, Shift+Enter = newline)"
               style="flex:1;resize:none;background:transparent;border:1px solid var(--line);
                      border-radius:12px;padding:10px;color:var(--text)"></textarea>
        <button id="ps-chat-send" style="background:linear-gradient(90deg,var(--brand),var(--accent));
                       border:none;color:#0b0f17;font-weight:800;padding:10px 12px;border-radius:12px">
          Send
        </button>
        <button id="ps-chat-cancel" type="button" style="display:none;border:1px solid var(--line);background:transparent;color:var(--text);padding:10px 12px;border-radius:12px">
          Cancel
        </button>
      </form>
    </div>
  </div>

  <script>
  // === Deployed API URL ===
  const CHAT_API_URL = "https://pranjal-chat-api.vercel.app/api/chat";

  (function(){
    const toggle = document.getElementById('ps-chat-toggle');
    const box = document.getElementById('ps-chat-box');
    const form = document.getElementById('ps-chat-form');
    const input = document.getElementById('ps-chat-input');
    const sendBtn = document.getElementById('ps-chat-send');
    const cancelBtn = document.getElementById('ps-chat-cancel');
    const msgs = document.getElementById('ps-chat-messages');
    const chipsBar = document.getElementById('ps-quick-chips');

    // Quick prompts + recent
    const QUICK = [
      "Summarize Pranjal’s projects",
      "ServiceNow skills and experience",
      ".NET / C# API experience",
      "Java & Spring Boot highlights",
      "What’s the resume link?",
      "How to contact Pranjal?"
    ];
    const RECENT_KEY = "ps-chat-recent-q";
    function loadRecent(){ try{return JSON.parse(localStorage.getItem(RECENT_KEY)||"[]");}catch{ return [] } }
    function saveRecent(q){
      const arr = loadRecent().filter(x => x !== q);
      arr.unshift(q);
      localStorage.setItem(RECENT_KEY, JSON.stringify(arr.slice(0,3)));
    }
    function renderChips(){
      chipsBar.innerHTML = "";
      const recent = loadRecent();
      [...recent, ...QUICK].slice(0,6).forEach(text => {
        const b = document.createElement('button');
        b.type = "button"; b.textContent = text;
        b.addEventListener('click', () => {
          input.value = text;
          // Send immediately on chip click
          form.dispatchEvent(new Event('submit'));
        });
        chipsBar.appendChild(b);
      });
    }
    renderChips();

    // Open/close
    toggle.addEventListener('click', () => {
      const open = box.style.display !== 'none';
      box.style.display = open ? 'none' : 'block';
      if (!open) setTimeout(() => input.focus(), 200);
    });

    // Resize textarea automatically
    function autoResize(){
      input.style.height = 'auto';
      input.style.height = Math.min(120, input.scrollHeight) + 'px';
    }
    input.addEventListener('input', autoResize);

    // Keyboard: Enter sends; Shift+Enter = newline
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        form.dispatchEvent(new Event('submit'));
      }
    });

    function bubble(text, who){
      const div = document.createElement('div');
      div.className = `msg ${who}`;
      div.textContent = text;
      msgs.appendChild(div);
      msgs.scrollTop = msgs.scrollHeight;
      return div;
    }

    // Typing indicator
    let typingEl = null;
    function showTyping(){
      if (typingEl) return;
      typingEl = document.createElement('div');
      typingEl.className = 'typing';
      typingEl.setAttribute('aria-live','polite');
      typingEl.innerHTML = '<span>Pranjal is typing</span> <span class="dot"></span><span class="dot"></span><span class="dot"></span>';
      msgs.appendChild(typingEl);
      msgs.scrollTop = msgs.scrollHeight;
    }
    function hideTyping(){
      if (typingEl){ typingEl.remove(); typingEl = null; }
    }

    // In-flight state
    let inflight = null; // {controller, id}
    function setBusy(b){
      sendBtn.disabled = b;
      cancelBtn.style.display = b ? 'inline-block' : 'none';
    }

    // Optimistic user bubble + cancel/ignore late
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const q = input.value.trim();
      if (!q || inflight) return;

      // optimistic bubble
      bubble(q, 'user');
      saveRecent(q); renderChips();

      // prepare request
      input.value = ''; autoResize();
      setBusy(true); showTyping();
      const controller = new AbortController();
      const reqId = Date.now().toString(36) + Math.random().toString(36).slice(2,6);
      inflight = { controller, id: reqId };

      // Cancel handler
      cancelBtn.onclick = () => {
        try { controller.abort(); } catch {}
        setBusy(false); hideTyping(); inflight = null;
      };

      // (Optional) pass brief local history (last 3 exchanges) to server
      const history = Array.from(msgs.querySelectorAll('.msg')).slice(-6).map(n => ({
        role: n.classList.contains('user') ? 'user' : 'assistant',
        content: n.textContent
      }));

      try{
        const r = await fetch(CHAT_API_URL, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({ message: q, history }),
          signal: controller.signal
        });

        // If another request replaced this one, ignore late response
        if (!inflight || inflight.id !== reqId) return;

        let data = null;
        try { data = await r.json(); } catch {}
        hideTyping();
        setBusy(false);
        inflight = null;

        if (r.ok && data && (data.answer || data.error)) {
          bubble(data.answer || 'Sorry, no answer.', 'bot');
        } else {
          bubble('⚠️ Unexpected response. Please try again.', 'bot');
        }
      } catch(err){
        if (err.name === 'AbortError') {
          // user cancelled: ignore
        } else {
          hideTyping(); setBusy(false); inflight = null;
          bubble('Network error. Please try again.', 'bot');
        }
      }
    });
  })();
  </script>
</body>
</html>
